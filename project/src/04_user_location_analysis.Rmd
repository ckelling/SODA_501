---
title: "04_user_location_analysis"
author: "Xiaoran Sun and Claire Kelling"
date: "2018/3/28"
output: html_document
---

```{r}
setwd("/storage/home/xbs5014/work") #Xiaoran's path on cluster
load(coll_town_tweets.Rdata)
load(coll_town_users.Rdata)
```

```{r}
user_locations<-data.frame(user=coll_town_users, locations=NA, coords=NA, stringsAsFactors = FALSE)
for (i in length(user_locations$user)){
  user_temp<-user_locations$user[i]
  locations_temp<-c(unique(coll_town_tweets[coll_town_tweets$user$screen_name==user_temp,]$place$full_name))
  coords_temp<-c(unique(coll_town_tweets[coll_town_tweets$user$screen_name==user_temp,]$place$bounding_box$coordinates))
  user_locations$locations[i]<-list(locations_temp)
  user_locations$coords[i]<-list(coords_temp)
}

save(user_locations, file = "/storage/home/xbs5014/work/user_locations.Rdata")
```