library(tidyverse)
library(lubridate)
library(ggplot2)
library(dplyr)
library(readr)
library(tidytext)
library(stringr)
library(scales)
load("/Users/SoYoungPark/Library/Application Support/Box/Box Edit/Documents/285358407344/coll_town_tweets.Rdata")
load("/Users/SoYoungPark/Library/Application Support/Box/Box Edit/Documents/285074003124/coll_town_tweets.Rdata")
tweets <- coll_town_user_tweets
data <- select(tweets, user, text, geo, place, timestamp_ms)
towns<-c("Ithaca, NY", "State College, PA", "Bloomington, IN", "Lawrence,
KS", "Blacksburg, VA", "College Station, TX", "Columbia, MO",
"Champaign, IL", "Ann Arbor, MI", "Gainesville, FL")
data_college_town <-data[grep(paste(towns,collapse="|"),
data$place$full_name),]
data_college_town$location <- data_college_town$place$full_name
data_college_town$ID <- data_college_town$user$id
data_college_town$user <- data_college_town$user$screen_name
tweets_college_town <- select(data_college_town, location, ID, user, text, timestamp_ms)
#botcleaned users
load("C:/Users/sup97/Downloads/user_locations_botcleaned.Rdata")
#botcleaned users
load("~Downloads/user_locations_botcleaned.Rdata")
load("~/Downloads/user_locations_botcleaned.Rdata")
botCleaned <- user_locations_cleaned
tweets_college_town <- left_join(tweets_college_town, botCleaned, by="user")
tweets_college_town <- subset(tweets_college_town, !is.na(probab))
tweets_college_town[6:8] <- NULL
tweets_college_town <- subset(tweets_college_town, user!="dominos") #remove dominos (maybe we need to also remove other companies too?)
replace_reg <- "https://t.co/[A-Za-z\\d]+|http://[A-Za-z\\d]+|&amp;|&lt;|&gt;|RT|https"
unnest_reg <- "([^A-Za-z_\\d#@']|'(?![A-Za-z_\\d#@]))"
myStopWords <- matrix(c("tweet", "est", "va", "fl", "tx", "champaign", "fl", "il", "pa", "mi", 1:10),ncol=2,byrow=FALSE)
colnames(myStopWords) <- c("word", "lexicon")
myStopWords <- tbl_df(myStopWords)
mstop_words <- tbl_df(stop_words)
myStopWords <- bind_rows(mstop_words, myStopWords)
myStopWords <- matrix(c("tweet", "est", "va", "fl", "tx", "fl", "il", "pa", "mi", 1:10),ncol=2,byrow=FALSE)
colnames(myStopWords) <- c("word", "lexicon")
myStopWords <- matrix(c("tweet", "est", "va", "fl", "tx", "fl", "il", "pa", "mi", 1:9),ncol=2,byrow=FALSE)
colnames(myStopWords) <- c("word", "lexicon")
myStopWords <- tbl_df(myStopWords)
mstop_words <- tbl_df(stop_words)
myStopWords <- bind_rows(mstop_words, myStopWords)
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
library(lubridate)
library(ggplot2)
library(readr)
library(tidytext)
library(stringr)
library(scales)
library(lubridate)
library(ggplot2)
library(readr)
library(tidytext)
library(tidytext)
library(stringr)
library(scales)
load("~/Downloads/coll_town_tweets.Rdata")
library(dplyr)
tweets <- coll_town_user_tweets
data <- select(tweets, user, text, geo, place, timestamp_ms)
towns<-c("Ithaca, NY", "State College, PA", "Bloomington, IN", "Lawrence,
KS", "Blacksburg, VA", "College Station, TX", "Columbia, MO",
"Champaign, IL", "Ann Arbor, MI", "Gainesville, FL")
data_college_town <-data[grep(paste(towns,collapse="|"),
data$place$full_name),]
data_college_town$location <- data_college_town$place$full_name
data_college_town$ID <- data_college_town$user$id
data_college_town$user <- data_college_town$user$screen_name
tweets_college_town <- select(data_college_town, location, ID, user, text, timestamp_ms)
#botcleaned users
load("~/Downloads/user_locations_botcleaned.Rdata")
botCleaned <- user_locations_cleaned
tweets_college_town <- left_join(tweets_college_town, botCleaned, by="user")
tweets_college_town <- subset(tweets_college_town, !is.na(probab))
tweets_college_town[6:8] <- NULL
replace_reg <- "https://t.co/[A-Za-z\\d]+|http://[A-Za-z\\d]+|&amp;|&lt;|&gt;|RT|https"
unnest_reg <- "([^A-Za-z_\\d#@']|'(?![A-Za-z_\\d#@]))"
myStopWords <- matrix(c("tweet", "est", "va", "fl", "tx", "fl", "il", "pa", "mi", "in", 1:10),ncol=2,byrow=FALSE)
colnames(myStopWords) <- c("word", "lexicon")
myStopWords <- tbl_df(myStopWords)
mstop_words <- tbl_df(stop_words)
myStopWords <- bind_rows(mstop_words, myStopWords)
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
View(tweets_college_town)
tweets_college_town <- select(data_college_town, location, ID, user, text, timestamp_ms)
botCleaned <- user_locations_cleaned
tweets_college_town <- left_join(tweets_college_town, botCleaned, by="user")
tweets_college_town <- subset(tweets_college_town, !is.na(probab))
View(tweets_college_town)
tweets_college_town[6:7] <- NULL
tweets_college_town <- tbl_df(tweets_college_town)
replace_reg <- "https://t.co/[A-Za-z\\d]+|http://[A-Za-z\\d]+|&amp;|&lt;|&gt;|RT|https"
unnest_reg <- "([^A-Za-z_\\d#@']|'(?![A-Za-z_\\d#@]))"
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
myStopWords <- matrix(c("tweet", "est", "va", "fl", "tx", "fl", "il", "pa", "mi", "in", 1:10),ncol=2,byrow=FALSE)
colnames(myStopWords) <- c("word", "lexicon")
myStopWords <- tbl_df(myStopWords)
mstop_words <- tbl_df(stop_words)
myStopWords <- bind_rows(mstop_words, myStopWords)
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
library(tidytext)
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% stop_words$word,
str_detect(word, "[a-z]"))
head(tweets_college_town$text)
tweets_college_town <- data.frame(tweets_college_town)
tidy_tweets <- tweets_college_town %>%
filter(!str_detect(text, "^RT")) %>%
mutate(text = str_replace_all(text, replace_reg, "")) %>%
unnest_tokens(word, text, token = "regex", pattern = unnest_reg) %>%
filter(!word %in% myStopWords$word,
str_detect(word, "[a-z]"))
